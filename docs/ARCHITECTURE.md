# –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –°–∏—Å—Ç–µ–º–∏ (System Architecture)

–î–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—É—î –≤–∏—Å–æ–∫–æ—Ä—ñ–≤–Ω–µ–≤—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞ –ø–æ—Ç—ñ–∫ –¥–∞–Ω–∏—Ö –≤ **AI SOUL**.

## üîÑ –ü–æ—Ç—ñ–∫ –î–∞–Ω–∏—Ö (Data Flow)

1.  **–í—Ö—ñ–¥–Ω—ñ –î–∞–Ω—ñ (Input)**:
    *   **–í–µ–±–∫–∞–º–µ—Ä–∞**: –ó–∞—Ö–æ–ø–ª—é—î –≤—ñ–¥–µ–æ–ø–æ—Ç—ñ–∫ (`navigator.mediaDevices.getUserMedia`).
    *   **MediaPipe Hands**: –û–±—Ä–æ–±–ª—è—î –≤—ñ–¥–µ–æ–∫–∞–¥—Ä–∏, –≤–∏–¥–∞—é—á–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ 21 —Ç–æ—á–∫–∏ (landmarks) –¥–ª—è –∫–æ–∂–Ω–æ—ó —Ä—É–∫–∏.
    *   **–ú—ñ–∫—Ä–æ—Ñ–æ–Ω (Voice)**: Web Speech API —Å–ª—É—Ö–∞—î –∫–æ–º–∞–Ω–¥–∏.

2.  **–û–±—Ä–æ–±–∫–∞ (Processing)**:
    *   `processResults()`: –ù–æ—Ä–º–∞–ª—ñ–∑—É—î –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏, —Ä–æ–∑—Ä–∞—Ö–æ–≤—É—î –±—ñ–æ–º–µ—Ö–∞–Ω—ñ–∫—É (–∫—É—Ç–∏, —à–≤–∏–¥–∫—ñ—Å—Ç—å), —Ä–æ–∑–ø—ñ–∑–Ω–∞—î –∂–µ—Å—Ç–∏ —Ç–∞ –æ–Ω–æ–≤–ª—é—î –≥–ª–æ–±–∞–ª—å–Ω–∏–π —Å—Ç–∞–Ω `STATE`.
    *   **–§—ñ–∑–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è**: `updatePhysicsAndVisuals()` —Ä–æ–∑—Ä–∞—Ö–æ–≤—É—î –ø—Ä—É–∂–∏–Ω–Ω—É —Ñ—ñ–∑–∏–∫—É —Å—Ñ–µ—Ä–∏, –¥–µ—Ñ–æ—Ä–º–∞—Ü—ñ—é –≤—ñ–¥ —Ä—É–∫ —Ç–∞ –≤–∑–∞—î–º–æ–¥—ñ—é –∑ AR-–æ–±'—î–∫—Ç–∞–º–∏.

3.  **–í–∏–≤—ñ–¥ (Output)**:
    *   **–í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è**: Three.js —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å 3D-—Å—Ü–µ–Ω—É (—Å—Ñ–µ—Ä–∞, –Ω–µ–π—Ä–æ–º–µ—Ä–µ–∂–∞, –∫—É–±–∏). Canvas 2D –º–∞–ª—é—î HUD.
    *   **–ê—É–¥—ñ–æ**: AudioEngine –≥–µ–Ω–µ—Ä—É—î –∑–≤—É–∫ –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Ä—ñ–≤–Ω—è "—Å—Ç—Ä–µ—Å—É" —Å–∏—Å—Ç–µ–º–∏.
    *   **Haptics**: Vibration API –¥–∞—î —Ç–∞–∫—Ç–∏–ª—å–Ω–∏–π –≤—ñ–¥–≥—É–∫.

## üèó –û—Å–Ω–æ–≤–Ω—ñ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

### 1. `STATE` (–ì–ª–æ–±–∞–ª—å–Ω–∏–π —Å—Ç–∞–Ω)
–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∏–π –æ–±'—î–∫—Ç, —â–æ –∑–±–µ—Ä—ñ–≥–∞—î:
*   `hands`: –ü–æ—Ç–æ—á–Ω—ñ –¥–∞–Ω—ñ —Ä—É–∫ (–ø–æ–∑–∏—Ü—ñ—è, —à–≤–∏–¥–∫—ñ—Å—Ç—å, —â–∏–ø–æ–∫).
*   `ar`: –°—Ç–∞–Ω —Ä–µ–∂–∏–º—É –ø—Ä–æ–∑–æ—Ä–æ—Å—Ç—ñ.
*   `stressEMA`: –ó–≥–ª–∞–¥–∂–µ–Ω–∏–π —Ä—ñ–≤–µ–Ω—å "—Å—Ç—Ä–µ—Å—É" (–≤–ø–ª–∏–≤–∞—î –Ω–∞ –∞—É–¥—ñ–æ —Ç–∞ –∫–æ–ª—ñ—Ä).
*   `recording`: –°—Ç–∞–Ω –∑–∞–ø–∏—Å—É.
*   `lastGesture`: –û—Å—Ç–∞–Ω–Ω—ñ–π —Ä–æ–∑–ø—ñ–∑–Ω–∞–Ω–∏–π –∂–µ—Å—Ç.

### 2. Physics Engine (–§—ñ–∑–∏—á–Ω–∏–π –†—É—à—ñ–π)
–ü—Ä–∞—Ü—é—î –Ω–∞ –≤–µ—Ä—à–∏–Ω–∞—Ö `IcosahedronGeometry`. –ö–æ–∂–Ω–∞ –≤–µ—Ä—à–∏–Ω–∞ –º–∞—î:
*   `origPos`: –ü–æ—á–∞—Ç–∫–æ–≤–∞ –ø–æ–∑–∏—Ü—ñ—è.
*   `currentPos`: –ü–æ—Ç–æ—á–Ω–∞ –ø–æ–∑–∏—Ü—ñ—è (–º–æ–∂–µ –±—É—Ç–∏ –∑–º—ñ—â–µ–Ω–∞ —Å–∏–ª–æ—é).
*   `spring`: –°–∏–ª–∞ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ `origPos`.
–í–∑–∞—î–º–æ–¥—ñ—è –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è —á–µ—Ä–µ–∑ –ø—Ä–æ—Å—Ç—ñ –∞–ª–≥–æ—Ä–∏—Ç–º–∏ –≤—ñ–¥—à—Ç–æ–≤—Ö—É–≤–∞–Ω–Ω—è (Push) —Ç–∞ –ø—Ä–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –≤–µ—Ä—à–∏–Ω (Grip).

### 3. Neural Visualization (–ù–µ–π—Ä–æ–Ω–Ω–∞ –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è)
–°–∏–º—É–ª—è—Ü—ñ—è –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ —Å—Ñ–µ—Ä–∏:
*   **–ù–µ–π—Ä–æ–Ω–∏**: –í—É–∑–ª–∏, —â–æ –ø—É–ª—å—Å—É—é—Ç—å –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ `stressEMA`.
*   **–°–∏–Ω–∞–ø—Å–∏**: –õ—ñ–Ω—ñ—ó –∑–≤'—è–∑–∫—É, —â–æ –ø–µ—Ä–µ–¥–∞—é—Ç—å —Å–∏–≥–Ω–∞–ª–∏.

### 4. Quality System (–°–∏—Å—Ç–µ–º–∞ –Ø–∫–æ—Å—Ç—ñ)
–ê–¥–∞–ø—Ç–∏–≤–Ω–µ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è:
*   –ú–æ–Ω—ñ—Ç–æ—Ä–∏—Ç—å FPS.
*   –î–∏–Ω–∞–º—ñ—á–Ω–æ –∑–º—ñ–Ω—é—î —á–∞—Å—Ç–æ—Ç—É –∑–∞–ø—É—Å–∫—É MediaPipe (`mpEvery`), —Ñ—ñ–∑–∏–∫–∏ —Ç–∞ —Ä–æ–∑–¥—ñ–ª—å–Ω—É –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å (`dprCap`).

## üìê –î–∑–µ—Ä–∫–∞–ª—é–≤–∞–Ω–Ω—è —Ç–∞ –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏
–í–µ–±-–∫–∞–º–µ—Ä–∞ –¥–∑–µ—Ä–∫–∞–ª—å–Ω–æ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è —á–µ—Ä–µ–∑ CSS `transform: scaleX(-1)`.
*   **2D HUD**: –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –º–∞–ª—é—é—Ç—å—Å—è –¥–∑–µ—Ä–∫–∞–ª—å–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —á–µ—Ä–µ–∑ CSS Canvas.
*   **3D –°–≤—ñ—Ç**: –î–ª—è –∫–æ—Ä–µ–∫—Ç–Ω–æ—ó —Ñ—ñ–∑–∏–∫–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ X –¥–∑–µ—Ä–∫–∞–ª—é—é—Ç—å—Å—è –≤—Ä—É—á–Ω—É –ø—Ä–∏ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω—ñ –∑ –µ–∫—Ä–∞–Ω–Ω–∏—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —É —Å–≤—ñ—Ç–æ–≤—ñ (`get3DFromScreen`).
