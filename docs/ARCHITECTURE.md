# –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –°–∏—Å—Ç–µ–º–∏ (System Architecture)

–î–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—É—î —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞ –ø–æ—Ç—ñ–∫ –¥–∞–Ω–∏—Ö –≤ **AI SOUL v2.4 (Modular)**.

## üèó –ú–æ–¥—É–ª—å–Ω–∞ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ (ES6 Modules)

–°–∏—Å—Ç–µ–º–∞ –ø–æ–≤–Ω—ñ—Å—Ç—é –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–∞ –Ω–∞ –º–æ–¥—É–ª—å–Ω—É –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É JavaScript (ES6). –¶–µ –¥–æ–∑–≤–æ–ª—è—î —ñ–∑–æ–ª—é–≤–∞—Ç–∏ –ª–æ–≥—ñ–∫—É, —Å–ø—Ä–æ—Å—Ç–∏—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –æ–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –∫–æ–∂–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

### –î–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è `src/`:
*   **`main.js`**: –ì–æ–ª–æ–≤–Ω–∏–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä. –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î –≤—Å—ñ –ø—ñ–¥—Å–∏—Å—Ç–µ–º–∏ —Ç–∞ –∫–µ—Ä—É—î –æ—Å–Ω–æ–≤–Ω–∏–º —Ü–∏–∫–ª–æ–º –∞–Ω—ñ–º–∞—Ü—ñ—ó.
*   **`config.js`**: –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Ç–∞ –≥–ª–æ–±–∞–ª—å–Ω–∏–π —Å—Ç–∞–Ω (`STATE`, `CFG`, `QUALITY`).
*   **`core/`**: –û—Å–Ω–æ–≤–Ω—ñ —Å–∏—Å—Ç–µ–º–Ω—ñ –º–æ–¥—É–ª—ñ:
    *   `AudioManager.js`: –°–∏–Ω—Ç–µ–∑ —Ç–∞ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –∑–≤—É–∫–æ–º.
    *   `SoulDB.js`: –ù–∞—Ä–∞—Ç–∏–≤–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö —Ç–∞ –ª–æ–≥—ñ–∫–∞ –≤–∏–±–æ—Ä—É —Ñ—Ä–∞–∑.
    *   `HapticEngine.js`: –¢–∞–∫—Ç–∏–ª—å–Ω–∏–π –≤—ñ–¥–≥—É–∫ (–≤—ñ–±—Ä–∞—Ü—ñ—è).
    *   `Calibration.js`: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±—ñ–æ–º–µ—Ç—Ä–∏—á–Ω–∏—Ö –º–∞—Å—à—Ç–∞–±—ñ–≤.
*   **`input/`**: –û–±—Ä–æ–±–∫–∞ –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö:
    *   `HandTracker.js`: –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è MediaPipe Hands.
    *   `Gestures.js`: –†–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è —Å–∫–ª–∞–¥–Ω–∏—Ö –∂–µ—Å—Ç—ñ–≤ (–∫–æ–ª–æ, –ø–æ–º–∞—Ö–∏).
    *   `Voice.js`: –ö–µ—Ä—É–≤–∞–Ω–Ω—è –≥–æ–ª–æ—Å–æ–≤–∏–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏.
*   **`physics/`**: –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –≤–∑–∞—î–º–æ–¥—ñ—ó:
    *   `PhysicsWorld.js`: –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü—ñ—è —Ñ—ñ–∑–∏—á–Ω–∏—Ö –æ–±'—î–∫—Ç—ñ–≤.
    *   `SoftBody.js`: –†–µ–∞–ª—å–Ω–∞ —Ñ—ñ–∑–∏–∫–∞ –¥–µ—Ñ–æ—Ä–º–∞—Ü—ñ—ó —Å—Ñ–µ—Ä–∏.
    *   `Singularity.js`: –õ–æ–≥—ñ–∫–∞ –ß–æ—Ä–Ω–æ—ó –î—ñ—Ä–∏.
*   **`visuals/`**: –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è:
    *   `SceneSetup.js`: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Three.js (—Å—Ü–µ–Ω–∞, –∫–∞–º–µ—Ä–∞, —Ä–µ–Ω–¥–µ—Ä).
    *   `HUD.js`: 2D —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å (—Å–∫–µ–ª–µ—Ç —Ä—É–∫–∏, –º–µ—Ç—Ä–∏–∫–∏).
    *   `NeuralNet.js`: –í–Ω—É—Ç—Ä—ñ—à–Ω—è —Å–∏–º—É–ª—è—Ü—ñ—è –Ω–µ–π—Ä–æ–º–µ—Ä–µ–∂—ñ.
    *   `Particles.js`: –ï—Ñ–µ–∫—Ç–∏ —á–∞—Å—Ç–∏–Ω–æ–∫ —Ç–∞ —Å–ø–∞–ª–∞—Ö—ñ–≤.
*   **`utils/`**: –î–æ–ø–æ–º—ñ–∂–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó:
    *   `MathUtils.js`: –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Ç–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ–π.
    *   `TwoHandInteraction.js`: –û–±—Ä–æ–±–∫–∞ –≤–∑–∞—î–º–æ–¥—ñ—ó –¥–≤–æ–º–∞ —Ä—É–∫–∞–º–∏ (–º–∞—Å—à—Ç–∞–±, —Ä–æ—Ç–∞—Ü—ñ—è).

## üîÑ –ü–æ—Ç—ñ–∫ –î–∞–Ω–∏—Ö (Data Flow)

1.  **Input Layer**: `HandTracker` –æ—Ç—Ä–∏–º—É—î –∫–∞–¥—Ä–∏ –∑ –∫–∞–º–µ—Ä–∏ —Ç–∞ –ø–µ—Ä–µ–¥–∞—î —ó—Ö —É `main.js`.
2.  **Processing Layer**: `main.js` –æ–Ω–æ–≤–ª—é—î `STATE`. `Gestures` —Ç–∞ `TwoHandInteraction` –∞–Ω–∞–ª—ñ–∑—É—é—Ç—å —Ä—É—Ö–∏.
3.  **Physics Layer**: `PhysicsWorld` –æ–Ω–æ–≤–ª—é—î —Å—Ç–∞–Ω–∏ –æ–±'—î–∫—Ç—ñ–≤. `SoftBody` —Ä–æ–∑—Ä–∞—Ö–æ–≤—É—î –º—ñ–∫—Ä–æ-–¥–µ—Ñ–æ—Ä–º–∞—Ü—ñ—ó –≤–µ—Ä—à–∏–Ω –Ω–∞ –æ—Å–Ω–æ–≤—ñ –ø–æ–∑–∏—Ü—ñ–π —Ä—É–∫ —É —Å–≤—ñ—Ç–æ–≤–∏—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞—Ö.
4.  **Visual Layer**: `renderer` Three.js —Ç–∞ `HUD` –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å –∑–º—ñ–Ω–∏.
5.  **Feedback Layer**: `AudioManager` —Ç–∞ `HapticEngine` —Ä–µ–∞–≥—É—é—Ç—å –Ω–∞ –∑–º—ñ–Ω–∏ —Ä—ñ–≤–Ω—è —Å—Ç—Ä–µ—Å—É (`stressEMA`).

## üìê –ü—Ä–æ—Å—Ç—ñ—Ä —Ç–∞ –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏

–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ MediaPipe (0-1) –Ω–æ—Ä–º–∞–ª—ñ–∑—É—é—Ç—å—Å—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `MathUtils.getScreenPos` (–∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –∫—Ä–æ–ø—É –≤—ñ–¥–µ–æ) —Ç–∞ –∫–æ–Ω–≤–µ—Ä—Ç—É—é—Ç—å—Å—è —É —Å–≤—ñ—Ç–æ–≤–∏–π 3D-–ø—Ä–æ—Å—Ç—ñ—Ä —á–µ—Ä–µ–∑ `get3DFromScreen`. –¶–µ –∑–∞–±–µ–∑–ø–µ—á—É—î —Ç–æ—á–Ω–µ –ø–æ–ø–∞–¥–∞–Ω–Ω—è "–ø–∞–ª—å—Ü—è" —É "–≤–µ—Ä—à–∏–Ω–∏" 3D-–æ–±'—î–∫—Ç–∞.
